<div style="max-height: 70vh; overflow-y: auto;" id="gamesScroll">
  <div id="gamesGrid" class="games-gallery one-row">
  {% assign games = site.games %}
  {% for item in games %}
    {% assign path_parts = item.relative_path | remove_first: '_games/' | split: '/' %}
    {% if path_parts.size == 2 %}
      {% assign thumb = item.url | append: 'thumb.png' %}
      <a class="game-card" href="{{ item.url }}" data-title="{{ item.title | downcase }}">
        <div class="thumb-wrap">
          <img src="{{ thumb }}"
               alt="{{ item.title }} thumbnail"
               loading="lazy"
               onerror="this.onerror=null;this.src='/assets/images/placeholder.png';" />
        </div>
        <div class="game-meta">
          <div class="game-title">{{ item.title }}</div>
        </div>
      </a>
    {% endif %}
  {% endfor %}
  

  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var grid = document.getElementById('gamesGrid');
  if (!grid) return;

  var cards = Array.from(grid.getElementsByClassName('game-card'));
  if (cards.length <= 5) return;

  for (let i = cards.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [cards[i], cards[j]] = [cards[j], cards[i]];
  }

  grid.textContent = '';

  cards.slice(0, 5).forEach(function(card) {
    grid.appendChild(card);
  });
});
</script>